{% extends 'bootstrap/base.html' %}

{% block content %}
    <h1>T</h1>
    <div style="padding: 20px">
    <table class="table">
    <tbody>
        {% for t in T %}
            <tr>
            {% for foo in t %}
                <td>{{ foo }}</td>
            {% endfor %}
            </tr>
        {% endfor %}
    </tbody>
    </table>
    </div>
    <h1>P</h1>
    <div style="padding: 20px">
    <table class="table">
    <tbody>
    <tr>
        {% for foo in p %}
            <td>{{ foo }}</td>
        {% endfor %}
    </tr>
    </tbody>
    </table>
    <button id = 'download_T' type="button" class="btn btn-success">Download T</button>
    <button id = 'download_P' type="button" class="btn btn-success">Download p</button>
    </div>
    
    
    <script type="text/javascript">
        $('#download_T').on('click',function () {
            fetch('/getresult/T').then(res => res.blob().then(blob => {
                var a = document.createElement('a');
                console.log(blob)
                var url = window.URL.createObjectURL(blob);
                var filename = 'T.csv';
                a.href = url;
                a.download = filename;
                a.click();
                window.URL.revokeObjectURL(url);
            }))
        })
        $('#download_P').on('click',function () {
             fetch('/getresult/p').then(res => res.blob().then(blob => {
                var a = document.createElement('a');
                console.log(blob)
                var url = window.URL.createObjectURL(blob);
                var filename = 'p.csv';
                a.href = url;
                a.download = filename;
                a.click();
                window.URL.revokeObjectURL(url);
            }))
        })
    
    </script>
{% endblock %}